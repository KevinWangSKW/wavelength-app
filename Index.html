<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Wavelength Data Processing</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="icon" href="logo.png" type="image/x-icon" />
  <link href="https://unpkg.com/aos@2.3.4/dist/aos.css" rel="stylesheet" />
  <style>
    html {
      scroll-behavior: smooth;
      overflow-x: hidden;
    }
    body {
      overflow-x: hidden;
    }
    .hero-title {
      text-shadow: 2px 2px 6px rgba(0, 0, 0, 0.7);
    }
    @keyframes fadeInUp {
      0% {
        opacity: 0;
        transform: translateY(40px);
      }
      100% {
        opacity: 1;
        transform: translateY(0);
      }
    }
    @keyframes pulseGlowScale {
      0% {
        box-shadow: 0 0 0px rgba(154, 255, 113, 0.2), 0 0 0px rgba(255, 255, 102, 0.1);
        transform: scale(1);
      }
      50% {
        box-shadow: 0 0 30px rgba(154, 255, 113, 0.6), 0 0 55px rgba(255, 255, 102, 0.4);
        transform: scale(1.08);
      }
      100% {
        box-shadow: 0 0 0px rgba(154, 255, 113, 0.2), 0 0 0px rgba(255, 255, 102, 0.1);
        transform: scale(1);
      }
    }
    .fade-in-up {
      animation: fadeInUp 1.2s ease-out both;
    }
    .pulse-glow-scale {
      animation: pulseGlowScale 3s ease-in-out infinite;
    }
    .input-transition:hover,
    .input-transition:focus {
      transform: scale(1.03);
      transition: transform 0.2s ease;
    }
  </style>
</head>
<body class="bg-[#1a102b] text-white min-h-screen flex flex-col overflow-x-hidden">

  <!-- Header -->
  <header class="bg-black shadow-md w-full">
    <div class="w-full px-4 py-4 flex items-center max-w-screen-2xl mx-auto">
      <div class="flex items-center space-x-3 ml-[4.16%]">
        <img src="logo.png" alt="Wavelength App Logo" class="h-10 w-10 object-contain" />
        <h1 class="text-3xl font-bold text-white">Wavelength App</h1>
      </div>
      <nav class="ml-auto mr-[16.66%] space-x-16 hidden md:flex">
        <a href="#hero" class="hover:text-[#b88ce0] transition duration-200">Home</a>
        <a href="#main-section" class="hover:text-[#b88ce0] transition duration-200">Input & Output</a>
      </nav>
    </div>
  </header>

  <!-- Hero Section -->
  <section id="hero"
    class="min-h-screen flex flex-col justify-start items-center text-center px-4 pt-52 bg-cover bg-center w-full"
    style="background-image: url('background.jpeg');">
    <h2 class="hero-title text-7xl font-extrabold mb-4 text-white fade-in-up">Upload & Monitor</h2>
    <p class="text-2xl mb-8 text-[#b88ce0] fade-in-up" style="animation-delay: 0.4s; animation-fill-mode: both;">
      Analyze EEG data to monitor surgeon fatigue.
    </p>
    <a href="#main-section"
      class="fade-in-up pulse-glow-scale hover:animate-none inline-block bg-white text-[#1a102b] font-bold px-8 py-3 rounded-full hover:bg-[#b88ce0] transition-all duration-300"
      style="animation-delay: 0.8s; animation-fill-mode: both;">
      Try Now
    </a>
  </section>

  <!-- Input & Output Section -->
  <section id="main-section" class="flex flex-col md:flex-row md:h-screen w-full overflow-x-hidden">
    
    <!-- Input -->
    <div class="bg-[#e9d8f4] text-[#1a102b] flex-1 flex flex-col justify-center items-center px-6" data-aos="fade-right">
      <div class="max-w-md w-full text-center">
        <h3 class="text-3xl font-bold mb-6">Upload EEG Data File</h3>
        <input type="file" id="fileInput" accept=".edf,.csv,.txt"
          class="input-transition block mx-auto mb-4 text-sm text-gray-800 bg-white rounded-lg shadow-md p-2 w-full" />
        <button onclick="uploadFile()"
          class="input-transition bg-[#3a245b] text-white font-semibold px-6 py-2 rounded-full hover:bg-[#4b2e6f] transition-all duration-300 hover:scale-105">
          Upload
        </button>
        <img id="preview" class="max-w-full mt-4 hidden rounded-lg shadow" alt="Preview" />
      </div>
    </div>

    <!-- Output -->
    <div class="flex-1 flex flex-col justify-center items-center px-6" style="background-color: rgb(21, 15, 45);" data-aos="fade-left">
      <div class="max-w-md w-full text-center">
        <h3 class="text-3xl font-bold mb-6">Surgeon Fatigue Assessment</h3>
        <p id="result" class="text-lg font-semibold text-white"></p>
      </div>
    </div>

  </section>

  <!-- Footer -->
  <footer class="bg-black text-center py-4 text-sm text-[#b88ce0] mt-auto w-full">
    Â© 2025 Wavelength App. All rights reserved.
  </footer>

  <!-- AOS Initialization -->
  <script src="https://unpkg.com/aos@2.3.4/dist/aos.js"></script>
  <script>
    AOS.init({
      once: true,
      duration: 1000,
      easing: 'ease-in-out'
    });
  </script>

  <!-- JavaScript -->
  <script>
    const fileInput = document.getElementById('fileInput');
    const preview = document.getElementById('preview');

    fileInput.addEventListener('change', () => {
      const file = fileInput.files[0];
      if (file && file.type.startsWith('image/')) {
        preview.src = URL.createObjectURL(file);
        preview.classList.remove('hidden');
      } else {
        preview.classList.add('hidden');
      }
    });

    async function uploadFile() {
      const resultDiv = document.getElementById('result');

      if (!fileInput.files.length) {
        resultDiv.innerHTML = '<span class="text-red-400">Please select a file.</span>';
        return;
      }

      const formData = new FormData();
      formData.append('file', fileInput.files[0]);

      resultDiv.innerHTML = '<span class="text-purple-200">ðŸ§  Processing EEG data...</span>';

      try {
        const res = await fetch('/upload', {
          method: 'POST',
          body: formData
        });

        if (!res.ok) throw new Error('Server error');

        const result = await res.json();
        resultDiv.innerHTML = `<span class="text-[#b88ce0]">Fatigue Level:</span> ${result.prediction}`;
      } catch (error) {
        resultDiv.innerHTML = '<span class="text-red-400">Error: Could not upload or get prediction.</span>';
        console.error(error);
      }
    }
  </script>

</body>
</html>
